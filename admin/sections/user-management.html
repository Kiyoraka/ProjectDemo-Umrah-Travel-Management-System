<!-- User Management Section -->
<div class="section-header">
    <h3>User Management</h3>
</div>

<!-- User Stats -->
<div class="stats-grid">
    <div class="stat-card glass">
        <div class="stat-icon"><i class="fas fa-users"></i></div>
        <div class="stat-content">
            <h4>Total Users</h4>
            <p class="stat-value">70</p>
        </div>
    </div>
    <div class="stat-card glass">
        <div class="stat-icon"><i class="fas fa-user-check"></i></div>
        <div class="stat-content">
            <h4>Active Users</h4>
            <p class="stat-value">62</p>
        </div>
    </div>
    <div class="stat-card glass">
        <div class="stat-icon"><i class="fas fa-user-plus"></i></div>
        <div class="stat-content">
            <h4>New This Month</h4>
            <p class="stat-value">12</p>
        </div>
    </div>
    <div class="stat-card glass">
        <div class="stat-icon"><i class="fas fa-user-shield"></i></div>
        <div class="stat-content">
            <h4>Admin Users</h4>
            <p class="stat-value">3</p>
        </div>
    </div>
</div>

<!-- Users Table -->
<div class="users-container glass-card">
    <div class="table-actions">
        <div class="search-box">
            <i class="fas fa-search"></i>
            <input type="text" class="search-input" placeholder="Search users...">
        </div>
        <!-- Add New User button removed -->
    </div>

    <div class="table-wrapper">
        <table class="data-table users-table">
            <thead>
                <tr>
                    <th>User ID</th>
                    <th>Name</th>
                    <th>Email</th>
                    <th>Phone</th>
                    <th>Package</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody id="usersTableBody">
                <!-- Users will be inserted here dynamically -->
            </tbody>
        </table>
    </div>

    <!-- Pagination -->
    <div class="pagination" id="usersPagination">
        <!-- Pagination will be generated dynamically -->
    </div>
</div>

<script>
(function() {
    // User data - 70 users who have made bookings
    const userData = [
    { id: 'U001', name: 'Ahmad Hassan', email: 'ahmad@example.com', phone: '+1 234-567-8901', package: 'Premium Umrah' },
    { id: 'U002', name: 'Fatima Al-Rashid', email: 'fatima@example.com', phone: '+1 234-567-8902', package: 'Standard Umrah' },
    { id: 'U003', name: 'Mohammed Ibrahim', email: 'mohammed@example.com', phone: '+1 234-567-8903', package: 'VIP Umrah' },
    { id: 'U004', name: 'Aisha Malik', email: 'aisha@example.com', phone: '+1 234-567-8904', package: 'Premium Umrah' },
    { id: 'U005', name: 'Omar Khaled', email: 'omar@example.com', phone: '+1 234-567-8905', package: 'Economy Umrah' },
    { id: 'U006', name: 'Zainab Ahmed', email: 'zainab@example.com', phone: '+1 234-567-8906', package: 'Standard Umrah' },
    { id: 'U007', name: 'Ali Hassan', email: 'ali@example.com', phone: '+1 234-567-8907', package: 'Premium Umrah' },
    { id: 'U008', name: 'Sara Abdullah', email: 'sara@example.com', phone: '+1 234-567-8908', package: 'VIP Umrah' },
    { id: 'U009', name: 'Khalid Mahmoud', email: 'khalid@example.com', phone: '+1 234-567-8909', package: 'Economy Umrah' },
    { id: 'U010', name: 'Noor Fatima', email: 'noor@example.com', phone: '+1 234-567-8910', package: 'Standard Umrah' },
    { id: 'U011', name: 'Yusuf Ali', email: 'yusuf@example.com', phone: '+1 234-567-8911', package: 'Premium Umrah' },
    { id: 'U012', name: 'Mariam Hassan', email: 'mariam@example.com', phone: '+1 234-567-8912', package: 'VIP Umrah' },
    { id: 'U013', name: 'Ibrahim Nasir', email: 'ibrahim@example.com', phone: '+1 234-567-8913', package: 'Premium Umrah' },
    { id: 'U014', name: 'Hafsa Rahman', email: 'hafsa@example.com', phone: '+1 234-567-8914', package: 'Standard Umrah' },
    { id: 'U015', name: 'Tariq Hussain', email: 'tariq@example.com', phone: '+1 234-567-8915', package: 'Economy Umrah' },
    { id: 'U016', name: 'Ruqayyah Begum', email: 'ruqayyah@example.com', phone: '+1 234-567-8916', package: 'Premium Umrah' },
    { id: 'U017', name: 'Hamza Sheikh', email: 'hamza@example.com', phone: '+1 234-567-8917', package: 'Standard Umrah' },
    { id: 'U018', name: 'Safiya Khan', email: 'safiya@example.com', phone: '+1 234-567-8918', package: 'VIP Umrah' },
    { id: 'U019', name: 'Bilal Ahmed', email: 'bilal@example.com', phone: '+1 234-567-8919', package: 'Premium Umrah' },
    { id: 'U020', name: 'Khadijah Ali', email: 'khadijah@example.com', phone: '+1 234-567-8920', package: 'Economy Umrah' },
    { id: 'U021', name: 'Zaid Mustafa', email: 'zaid@example.com', phone: '+1 234-567-8921', package: 'Standard Umrah' },
    { id: 'U022', name: 'Amina Siddiqui', email: 'amina@example.com', phone: '+1 234-567-8922', package: 'Premium Umrah' },
    { id: 'U023', name: 'Usman Qureshi', email: 'usman@example.com', phone: '+1 234-567-8923', package: 'VIP Umrah' },
    { id: 'U024', name: 'Sumayya Patel', email: 'sumayya@example.com', phone: '+1 234-567-8924', package: 'Economy Umrah' },
    { id: 'U025', name: 'Imran Abbas', email: 'imran@example.com', phone: '+1 234-567-8925', package: 'Standard Umrah' },
    { id: 'U026', name: 'Huda Malik', email: 'huda@example.com', phone: '+1 234-567-8926', package: 'Premium Umrah' },
    { id: 'U027', name: 'Salman Raza', email: 'salman@example.com', phone: '+1 234-567-8927', package: 'VIP Umrah' },
    { id: 'U028', name: 'Asma Begum', email: 'asma@example.com', phone: '+1 234-567-8928', package: 'Premium Umrah' },
    { id: 'U029', name: 'Farhan Shaikh', email: 'farhan@example.com', phone: '+1 234-567-8929', package: 'Standard Umrah' },
    { id: 'U030', name: 'Zahra Noor', email: 'zahra@example.com', phone: '+1 234-567-8930', package: 'Economy Umrah' },
    { id: 'U031', name: 'Adnan Iqbal', email: 'adnan@example.com', phone: '+1 234-567-8931', package: 'Premium Umrah' },
    { id: 'U032', name: 'Layla Hassan', email: 'layla@example.com', phone: '+1 234-567-8932', package: 'Standard Umrah' },
    { id: 'U033', name: 'Rizwan Ahmad', email: 'rizwan@example.com', phone: '+1 234-567-8933', package: 'VIP Umrah' },
    { id: 'U034', name: 'Maryam Fatima', email: 'maryam@example.com', phone: '+1 234-567-8934', package: 'Economy Umrah' },
    { id: 'U035', name: 'Faisal Khan', email: 'faisal@example.com', phone: '+1 234-567-8935', package: 'Premium Umrah' },
    { id: 'U036', name: 'Sana Sheikh', email: 'sana@example.com', phone: '+1 234-567-8936', package: 'Standard Umrah' },
    { id: 'U037', name: 'Arif Hussain', email: 'arif@example.com', phone: '+1 234-567-8937', package: 'VIP Umrah' },
    { id: 'U038', name: 'Bushra Ali', email: 'bushra@example.com', phone: '+1 234-567-8938', package: 'Economy Umrah' },
    { id: 'U039', name: 'Junaid Rahman', email: 'junaid@example.com', phone: '+1 234-567-8939', package: 'Premium Umrah' },
    { id: 'U040', name: 'Aaliya Mirza', email: 'aaliya@example.com', phone: '+1 234-567-8940', package: 'Standard Umrah' },
    { id: 'U041', name: 'Nasir Ahmed', email: 'nasir@example.com', phone: '+1 234-567-8941', package: 'VIP Umrah' },
    { id: 'U042', name: 'Rabia Qureshi', email: 'rabia@example.com', phone: '+1 234-567-8942', package: 'Economy Umrah' },
    { id: 'U043', name: 'Waheed Abbas', email: 'waheed@example.com', phone: '+1 234-567-8943', package: 'Premium Umrah' },
    { id: 'U044', name: 'Naima Patel', email: 'naima@example.com', phone: '+1 234-567-8944', package: 'Standard Umrah' },
    { id: 'U045', name: 'Shoaib Malik', email: 'shoaib@example.com', phone: '+1 234-567-8945', package: 'VIP Umrah' },
    { id: 'U046', name: 'Hina Begum', email: 'hina@example.com', phone: '+1 234-567-8946', package: 'Economy Umrah' },
    { id: 'U047', name: 'Danish Khan', email: 'danish@example.com', phone: '+1 234-567-8947', package: 'Premium Umrah' },
    { id: 'U048', name: 'Faiza Shaikh', email: 'faiza@example.com', phone: '+1 234-567-8948', package: 'Standard Umrah' },
    { id: 'U049', name: 'Aamir Siddiqui', email: 'aamir@example.com', phone: '+1 234-567-8949', package: 'VIP Umrah' },
    { id: 'U050', name: 'Shabana Noor', email: 'shabana@example.com', phone: '+1 234-567-8950', package: 'Economy Umrah' },
    { id: 'U051', name: 'Rehan Aziz', email: 'rehan@example.com', phone: '+1 234-567-8951', package: 'Premium Umrah' },
    { id: 'U052', name: 'Safia Yusuf', email: 'safia@example.com', phone: '+1 234-567-8952', package: 'Standard Umrah' },
    { id: 'U053', name: 'Kamran Ali', email: 'kamran@example.com', phone: '+1 234-567-8953', package: 'VIP Umrah' },
    { id: 'U054', name: 'Rubina Hassan', email: 'rubina@example.com', phone: '+1 234-567-8954', package: 'Economy Umrah' },
    { id: 'U055', name: 'Sajid Raza', email: 'sajid@example.com', phone: '+1 234-567-8955', package: 'Premium Umrah' },
    { id: 'U056', name: 'Mehreen Fatima', email: 'mehreen@example.com', phone: '+1 234-567-8956', package: 'Standard Umrah' },
    { id: 'U057', name: 'Asif Iqbal', email: 'asif@example.com', phone: '+1 234-567-8957', package: 'VIP Umrah' },
    { id: 'U058', name: 'Sabah Khan', email: 'sabah@example.com', phone: '+1 234-567-8958', package: 'Economy Umrah' },
    { id: 'U059', name: 'Nadeem Ahmad', email: 'nadeem@example.com', phone: '+1 234-567-8959', package: 'Premium Umrah' },
    { id: 'U060', name: 'Tahira Sheikh', email: 'tahira@example.com', phone: '+1 234-567-8960', package: 'Standard Umrah' },
    { id: 'U061', name: 'Irfan Malik', email: 'irfan@example.com', phone: '+1 234-567-8961', package: 'VIP Umrah' },
    { id: 'U062', name: 'Shazia Begum', email: 'shazia@example.com', phone: '+1 234-567-8962', package: 'Economy Umrah' },
    { id: 'U063', name: 'Naveed Qureshi', email: 'naveed@example.com', phone: '+1 234-567-8963', package: 'Premium Umrah' },
    { id: 'U064', name: 'Uzma Patel', email: 'uzma@example.com', phone: '+1 234-567-8964', package: 'Standard Umrah' },
    { id: 'U065', name: 'Kashif Abbas', email: 'kashif@example.com', phone: '+1 234-567-8965', package: 'VIP Umrah' },
    { id: 'U066', name: 'Salma Noor', email: 'salma@example.com', phone: '+1 234-567-8966', package: 'Economy Umrah' },
    { id: 'U067', name: 'Javed Hassan', email: 'javed@example.com', phone: '+1 234-567-8967', package: 'Premium Umrah' },
    { id: 'U068', name: 'Razia Mirza', email: 'razia@example.com', phone: '+1 234-567-8968', package: 'Standard Umrah' },
    { id: 'U069', name: 'Tanveer Ali', email: 'tanveer@example.com', phone: '+1 234-567-8969', package: 'VIP Umrah' },
    { id: 'U070', name: 'Fouzia Rahman', email: 'fouzia@example.com', phone: '+1 234-567-8970', package: 'Economy Umrah' }
    ];

    const usersPerPage = 7;
    let currentUserPage = 1;

    function displayUsers(page) {
        console.log('=== displayUsers called with page:', page);
        console.log('userData length:', userData.length);
        console.log('First user:', userData[0]);

        const tbody = document.getElementById('usersTableBody');
        if (!tbody) {
            console.error('ERROR: Users table body not found!');
            return;
        }
        console.log('Table body found:', tbody);

        const start = (page - 1) * usersPerPage;
        const end = start + usersPerPage;
        const paginatedUsers = userData.slice(start, end);
        console.log('Paginated users count:', paginatedUsers.length);
        console.log('Paginated users:', paginatedUsers);

        tbody.innerHTML = '';
        console.log('Cleared table body');

        paginatedUsers.forEach((user, index) => {
            console.log(`Adding user ${index + 1}:`, user);
            const row = `
                <tr>
                    <td>#${user.id}</td>
                    <td>${user.name}</td>
                    <td>${user.email}</td>
                    <td>${user.phone}</td>
                    <td><span class="package-badge">${user.package}</span></td>
                    <td class="action-buttons">
                        <button class="btn-icon view" title="View" onclick="viewUser('${user.id}')"><i class="fas fa-eye"></i></button>
                        <button class="btn-icon edit" title="Edit" onclick="editUser('${user.id}')"><i class="fas fa-edit"></i></button>
                        <button class="btn-icon delete" title="Delete" onclick="deleteUser('${user.id}')"><i class="fas fa-trash"></i></button>
                    </td>
                </tr>
            `;
            tbody.innerHTML += row;
        });

        console.log('Final table HTML length:', tbody.innerHTML.length);
        console.log('Table rows count:', tbody.getElementsByTagName('tr').length);

        updateUserPagination();
        console.log('=== displayUsers completed ===');
    }

    function updateUserPagination() {
        const totalPages = Math.ceil(userData.length / usersPerPage);
        const pagination = document.getElementById('usersPagination');

        if (!pagination) {
            console.log('Pagination element not found');
            return;
        }

        let paginationHTML = '';

        // Previous button
        paginationHTML += `
            <button class="page-btn" onclick="changeUserPage(${currentUserPage - 1})" ${currentUserPage === 1 ? 'disabled' : ''}>
                <i class="fas fa-chevron-left"></i>
            </button>
        `;

        // Page numbers
        for (let i = 1; i <= totalPages; i++) {
            if (i === 1 || i === totalPages || (i >= currentUserPage - 1 && i <= currentUserPage + 1)) {
                paginationHTML += `
                    <button class="page-btn ${i === currentUserPage ? 'active' : ''}" onclick="changeUserPage(${i})">
                        ${i}
                    </button>
                `;
            } else if (i === currentUserPage - 2 || i === currentUserPage + 2) {
                paginationHTML += `<span class="page-dots">...</span>`;
            }
        }

        // Next button
        paginationHTML += `
            <button class="page-btn" onclick="changeUserPage(${currentUserPage + 1})" ${currentUserPage === totalPages ? 'disabled' : ''}>
                <i class="fas fa-chevron-right"></i>
            </button>
        `;

        pagination.innerHTML = paginationHTML;
    }

    window.changeUserPage = function(page) {
        const totalPages = Math.ceil(userData.length / usersPerPage);
        if (page >= 1 && page <= totalPages) {
            currentUserPage = page;
            displayUsers(currentUserPage);
        }
    };

    window.viewUser = function(userId) {
        const user = userData.find(u => u.id === userId);
        if (user) {
            alert(`Viewing user: ${user.name}`);
        }
    };

    window.editUser = function(userId) {
        const user = userData.find(u => u.id === userId);
        if (user) {
            alert(`Editing user: ${user.name}`);
        }
    };

    window.deleteUser = function(userId) {
        const user = userData.find(u => u.id === userId);
        if (user && confirm(`Are you sure you want to delete user: ${user.name}?`)) {
            alert(`User ${user.name} deleted`);
        }
    };

    // Initialize users display function
    window.initializeUsersDisplay = function() {
        console.log('=== initializeUsersDisplay called ===');
        console.log('userData available?', typeof userData !== 'undefined');
        console.log('userData length:', userData ? userData.length : 'N/A');

        const tbody = document.getElementById('usersTableBody');
        console.log('Looking for tbody with id "usersTableBody"');

        if (tbody) {
            console.log('SUCCESS: Users table body found!');
            console.log('Calling displayUsers(1)...');
            displayUsers(1);
        } else {
            console.error('ERROR: Users table body NOT found!');
            console.log('Available elements with IDs:');
            const allElements = document.querySelectorAll('[id]');
            allElements.forEach(el => console.log('  -', el.id));
        }
    };

    // Initialize immediately when script loads
    console.log('=== Script loaded, checking for immediate init ===');
    const tbody = document.getElementById('usersTableBody');
    if (tbody) {
        console.log('DIRECT INIT: Table body found, displaying users');
        displayUsers(1);
    } else {
        console.log('DIRECT INIT: Table body not found, waiting for initializeUsersDisplay call');
    }
})();
</script>

<style>
/* User Management Specific Styles */
.package-badge {
    padding: 4px 12px;
    border-radius: 20px;
    font-size: 0.85rem;
    font-weight: 500;
    background: linear-gradient(135deg, rgba(76, 175, 80, 0.2), rgba(129, 199, 132, 0.2));
    color: #4CAF50;
    display: inline-block;
}
</style>