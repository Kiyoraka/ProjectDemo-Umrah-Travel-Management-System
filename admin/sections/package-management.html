<!-- Package Management Section -->
<div class="section-header">
    <h3>Package Management</h3>
</div>

<div class="package-management-container">
    <div class="table-actions">
        <button class="btn btn-primary" id="addPackageBtn">
            <i class="fas fa-plus"></i> Add New Package
        </button>
    </div>

    <div class="table-wrapper glass-card">
        <table class="data-table packages-table">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Package Name</th>
                    <th>Price</th>
                    <th>Duration</th>
                    <th>Status</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>1</td>
                    <td>Economy Package</td>
                    <td>$2,500</td>
                    <td>15 Days</td>
                    <td><span class="status-badge active">Active</span></td>
                    <td class="action-buttons">
                        <button class="btn-icon edit" title="Edit">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn-icon delete" title="Delete">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                </tr>
                <tr>
                    <td>2</td>
                    <td>Premium Package</td>
                    <td>$4,500</td>
                    <td>21 Days</td>
                    <td><span class="status-badge active">Active</span></td>
                    <td class="action-buttons">
                        <button class="btn-icon edit" title="Edit">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn-icon delete" title="Delete">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                </tr>
                <tr>
                    <td>3</td>
                    <td>VIP Package</td>
                    <td>$7,000</td>
                    <td>30 Days</td>
                    <td><span class="status-badge active">Active</span></td>
                    <td class="action-buttons">
                        <button class="btn-icon edit" title="Edit">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn-icon delete" title="Delete">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<!-- Package Modals -->
<!-- Add Package Modal -->
<div class="modal" id="addPackageModal">
    <div class="modal-content glass-card">
        <span class="modal-close"><i class="fas fa-times"></i></span>
        <div class="modal-header">
            <h2>Add New Package</h2>
            <p>Create a new Umrah package</p>
        </div>
        <form id="addPackageForm">
            <div class="form-group">
                <label class="form-label">Package Name</label>
                <input type="text" name="packageName" class="form-control" placeholder="Enter package name" autocomplete="off" required>
            </div>
            <div class="form-group">
                <label class="form-label">Price</label>
                <input type="text" name="price" class="form-control" placeholder="e.g., $2,500" autocomplete="off" required>
            </div>
            <div class="form-group">
                <label class="form-label">Duration</label>
                <input type="text" name="duration" class="form-control" placeholder="e.g., 15 Days" autocomplete="off" required>
            </div>
            <div class="form-group">
                <label class="form-label">Package Details</label>
                <textarea name="details" class="form-control" rows="4" placeholder="Enter package inclusions and details"></textarea>
            </div>
            <div class="form-group">
                <label class="form-label">Status</label>
                <select name="status" class="form-control">
                    <option value="active">Active</option>
                    <option value="inactive">Inactive</option>
                </select>
            </div>
            <div class="modal-buttons">
                <button type="submit" class="btn btn-primary">Add Package</button>
                <button type="button" class="btn btn-glass modal-cancel">Cancel</button>
            </div>
        </form>
    </div>
</div>

<!-- Edit Package Modal -->
<div class="modal" id="editPackageModal">
    <div class="modal-content glass-card">
        <span class="modal-close"><i class="fas fa-times"></i></span>
        <div class="modal-header">
            <h2>Edit Package</h2>
            <p>Update package details</p>
        </div>
        <form id="editPackageForm">
            <input type="hidden" name="packageId" id="editPackageId">
            <div class="form-group">
                <label class="form-label">Package Name</label>
                <input type="text" name="packageName" id="editPackageName" class="form-control" autocomplete="off" required>
            </div>
            <div class="form-group">
                <label class="form-label">Price</label>
                <input type="text" name="price" id="editPrice" class="form-control" autocomplete="off" required>
            </div>
            <div class="form-group">
                <label class="form-label">Duration</label>
                <input type="text" name="duration" id="editDuration" class="form-control" autocomplete="off" required>
            </div>
            <div class="form-group">
                <label class="form-label">Package Details</label>
                <textarea name="details" id="editDetails" class="form-control" rows="4"></textarea>
            </div>
            <div class="form-group">
                <label class="form-label">Status</label>
                <select name="status" id="editStatus" class="form-control">
                    <option value="active">Active</option>
                    <option value="inactive">Inactive</option>
                </select>
            </div>
            <div class="modal-buttons">
                <button type="submit" class="btn btn-primary">Save Changes</button>
                <button type="button" class="btn btn-glass modal-cancel">Cancel</button>
            </div>
        </form>
    </div>
</div>

<!-- Delete Confirmation Modal -->
<div class="modal" id="deletePackageModal">
    <div class="modal-content glass-card delete-modal">
        <span class="modal-close"><i class="fas fa-times"></i></span>
        <div class="modal-header">
            <h2>Delete Package</h2>
        </div>
        <div class="delete-confirmation">
            <div class="delete-icon">
                <i class="fas fa-exclamation-triangle"></i>
            </div>
            <p class="delete-message">Are you sure you want to delete <strong id="deletePackageName"></strong>?</p>
            <p class="delete-warning">This action cannot be undone.</p>
        </div>
        <div class="modal-buttons">
            <button type="button" class="btn btn-danger" id="confirmDelete">Delete</button>
            <button type="button" class="btn btn-glass modal-cancel">Cancel</button>
        </div>
    </div>
</div>

<style>
/* Modal Styles - Centered like User Management */
.modal {
    display: none;
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(5px);
}

.modal-content {
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.9) 100%);
    margin: 5% auto;
    padding: 30px;
    border: 1px solid rgba(76, 175, 80, 0.3);
    border-radius: 15px;
    width: 90%;
    max-width: 600px;
    position: relative;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
}

.modal-header {
    margin-bottom: 25px;
    text-align: center;
}

.modal-header h2 {
    color: var(--primary-green);
    margin-bottom: 8px;
    font-size: 1.8rem;
}

.modal-header p {
    color: var(--text-light);
    font-size: 0.95rem;
}

.modal-close {
    position: absolute;
    right: 20px;
    top: 20px;
    font-size: 1.5rem;
    cursor: pointer;
    color: var(--text-light);
    transition: all 0.3s;
}

.modal-close:hover {
    color: var(--primary-green);
    transform: rotate(90deg);
}

.modal-buttons {
    display: flex;
    justify-content: flex-end;
    gap: 10px;
    margin-top: 25px;
    padding-top: 20px;
    border-top: 1px solid rgba(76, 175, 80, 0.1);
}

.modal-buttons .btn {
    padding: 10px 20px;
}

/* Form Styles */
.form-group {
    margin-bottom: 20px;
}

.form-label {
    display: block;
    margin-bottom: 5px;
    font-weight: 500;
    color: var(--text-dark);
}

.form-control {
    width: 100%;
    padding: 10px 15px;
    border: 1px solid rgba(76, 175, 80, 0.3);
    border-radius: 8px;
    font-size: 0.95rem;
    background: rgba(255, 255, 255, 0.8);
    transition: all 0.3s;
}

.form-control:focus {
    outline: none;
    border-color: var(--primary-green);
    box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
    background: white;
}

textarea.form-control {
    resize: vertical;
    min-height: 100px;
}

/* Delete Modal Specific */
.delete-confirmation {
    text-align: center;
    padding: 20px 0;
}

.delete-icon {
    font-size: 3rem;
    color: #FFA500;
    margin-bottom: 20px;
}

.delete-message {
    font-size: 1.2rem;
    color: var(--text-dark);
    margin-bottom: 15px;
}

.delete-warning {
    color: #f44336;
    font-size: 0.9rem;
    margin-top: 15px;
    font-style: italic;
}

/* Button Styles */
.btn-primary {
    background: var(--primary-green);
    color: white;
    border: 1px solid var(--primary-green);
}

.btn-primary:hover {
    background: #22923d;
    border-color: #22923d;
}

.btn-danger {
    background: #f44336;
    color: white;
    border: none;
}

.btn-danger:hover {
    background: #da190b;
}

.btn-glass {
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(76, 175, 80, 0.3);
    color: var(--text-primary);
}

.btn-glass:hover {
    background: rgba(76, 175, 80, 0.1);
    border-color: var(--primary-green);
}

/* Action Button Colors - Green for consistency */
.action-buttons .btn-icon {
    color: #4CAF50 !important;
}

.action-buttons .btn-icon:hover {
    background: rgba(76, 175, 80, 0.1) !important;
    color: #4CAF50 !important;
    border-color: #4CAF50 !important;
}

.action-buttons .btn-icon.edit {
    color: #4CAF50 !important;
}

.action-buttons .btn-icon.delete {
    color: #4CAF50 !important;
}
</style>

<script>
(function() {
    // Package Management Modal Functionality

    // Get modal elements
    const addPackageModal = document.getElementById('addPackageModal');
    const editPackageModal = document.getElementById('editPackageModal');
    const deletePackageModal = document.getElementById('deletePackageModal');

    // Get buttons
    const addPackageBtn = document.getElementById('addPackageBtn');

    // Add Package Modal
    if (addPackageBtn) {
        addPackageBtn.addEventListener('click', function() {
            if (addPackageModal) {
                addPackageModal.style.display = 'block';
            }
        });
    }

    // Edit and Delete buttons for each row
    document.querySelectorAll('.btn-icon.edit').forEach(button => {
        button.addEventListener('click', function() {
            if (editPackageModal) {
                // Get package data from the row
                const row = this.closest('tr');
                const packageId = row.cells[0].textContent;
                const packageName = row.cells[1].textContent;
                const price = row.cells[2].textContent;
                const duration = row.cells[3].textContent;

                // Populate edit form
                const editForm = editPackageModal.querySelector('form');
                if (editForm) {
                    const nameInput = editForm.querySelector('[name="packageName"]');
                    const priceInput = editForm.querySelector('[name="price"]');
                    const durationInput = editForm.querySelector('[name="duration"]');

                    if (nameInput) nameInput.value = packageName;
                    if (priceInput) priceInput.value = price;
                    if (durationInput) durationInput.value = duration;
                }

                editPackageModal.style.display = 'block';
            }
        });
    });

    document.querySelectorAll('.btn-icon.delete').forEach(button => {
        button.addEventListener('click', function() {
            if (deletePackageModal) {
                // Get package data from the row
                const row = this.closest('tr');
                const packageName = row.cells[1].textContent;

                // Update delete modal with package name
                const packageNameElement = deletePackageModal.querySelector('#deletePackageName');
                if (packageNameElement) {
                    packageNameElement.textContent = packageName;
                }

                deletePackageModal.style.display = 'block';
            }
        });
    });

    // Close modals
    document.querySelectorAll('.modal-close, .modal-cancel').forEach(element => {
        element.addEventListener('click', function() {
            const modal = this.closest('.modal');
            if (modal) {
                modal.style.display = 'none';
            }
        });
    });

    // Close modal when clicking outside
    document.querySelectorAll('.modal').forEach(modal => {
        modal.addEventListener('click', function(e) {
            if (e.target === this) {
                this.style.display = 'none';
            }
        });
    });

    // Handle form submissions
    const addPackageForm = document.getElementById('addPackageForm');
    if (addPackageForm) {
        addPackageForm.addEventListener('submit', function(e) {
            e.preventDefault();

            // Get form data
            const formData = new FormData(this);
            const packageName = formData.get('packageName');
            const price = formData.get('price');
            const duration = formData.get('duration');

            // In a real app, this would send to server
            alert(`Package "${packageName}" added successfully!`);

            // Close modal and reset form
            addPackageModal.style.display = 'none';
            this.reset();
        });
    }

    const editPackageForm = document.getElementById('editPackageForm');
    if (editPackageForm) {
        editPackageForm.addEventListener('submit', function(e) {
            e.preventDefault();

            // Get form data
            const formData = new FormData(this);
            const packageName = formData.get('packageName');

            // In a real app, this would send to server
            alert(`Package "${packageName}" updated successfully!`);

            // Close modal
            editPackageModal.style.display = 'none';
        });
    }

    // Delete confirmation
    const confirmDeleteBtn = document.getElementById('confirmDeletePackage');
    if (confirmDeleteBtn) {
        confirmDeleteBtn.addEventListener('click', function() {
            const packageName = document.getElementById('deletePackageName')?.textContent || 'Package';

            // In a real app, this would send delete request to server
            alert(`Package "${packageName}" deleted successfully!`);

            // Close modal
            deletePackageModal.style.display = 'none';
        });
    }
})();
</script>