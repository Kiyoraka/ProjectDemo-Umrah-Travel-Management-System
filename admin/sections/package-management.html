<!-- Package Management Section -->
<div class="section-header">
    <h3>Package Management</h3>
</div>

<div class="package-management-container">
    <div class="table-actions">
        <button class="btn btn-primary" id="addPackageBtn">
            <i class="fas fa-plus"></i> Add New Package
        </button>
    </div>

    <div class="table-wrapper glass-card">
        <table class="data-table packages-table">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Package Name</th>
                    <th>Price</th>
                    <th>Duration</th>
                    <th>Status</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>1</td>
                    <td>Economy Package</td>
                    <td>$2,500</td>
                    <td>15 Days</td>
                    <td><span class="status-badge active">Active</span></td>
                    <td class="action-buttons">
                        <button class="btn-icon edit" title="Edit">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn-icon delete" title="Delete">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                </tr>
                <tr>
                    <td>2</td>
                    <td>Premium Package</td>
                    <td>$4,500</td>
                    <td>21 Days</td>
                    <td><span class="status-badge active">Active</span></td>
                    <td class="action-buttons">
                        <button class="btn-icon edit" title="Edit">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn-icon delete" title="Delete">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                </tr>
                <tr>
                    <td>3</td>
                    <td>VIP Package</td>
                    <td>$7,000</td>
                    <td>30 Days</td>
                    <td><span class="status-badge active">Active</span></td>
                    <td class="action-buttons">
                        <button class="btn-icon edit" title="Edit">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn-icon delete" title="Delete">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<!-- Package Modals -->
<!-- Add Package Modal -->
<div class="modal" id="addPackageModal">
    <div class="modal-content glass-card">
        <span class="modal-close"><i class="fas fa-times"></i></span>
        <div class="modal-header">
            <h2>Add New Package</h2>
            <p>Create a new Umrah package</p>
        </div>
        <form id="addPackageForm">
            <div class="form-group">
                <label class="form-label">Package Name</label>
                <input type="text" name="packageName" class="form-control" placeholder="Enter package name" autocomplete="off" required>
            </div>
            <div class="form-group">
                <label class="form-label">Price</label>
                <input type="text" name="price" class="form-control" placeholder="e.g., $2,500" autocomplete="off" required>
            </div>
            <div class="form-group">
                <label class="form-label">Duration</label>
                <input type="text" name="duration" class="form-control" placeholder="e.g., 15 Days" autocomplete="off" required>
            </div>
            <div class="form-group">
                <label class="form-label">Package Details</label>
                <textarea name="details" class="form-control" rows="4" placeholder="Enter package inclusions and details"></textarea>
            </div>
            <div class="form-group">
                <label class="form-label">Status</label>
                <select name="status" class="form-control">
                    <option value="active">Active</option>
                    <option value="inactive">Inactive</option>
                </select>
            </div>
            <div class="modal-buttons">
                <button type="submit" class="btn btn-primary">Add Package</button>
                <button type="button" class="btn btn-glass modal-cancel">Cancel</button>
            </div>
        </form>
    </div>
</div>

<!-- Edit Package Modal -->
<div class="modal" id="editPackageModal">
    <div class="modal-content glass-card">
        <span class="modal-close"><i class="fas fa-times"></i></span>
        <div class="modal-header">
            <h2>Edit Package</h2>
            <p>Update package details</p>
        </div>
        <form id="editPackageForm">
            <input type="hidden" name="packageId" id="editPackageId">
            <div class="form-group">
                <label class="form-label">Package Name</label>
                <input type="text" name="packageName" id="editPackageName" class="form-control" autocomplete="off" required>
            </div>
            <div class="form-group">
                <label class="form-label">Price</label>
                <input type="text" name="price" id="editPrice" class="form-control" autocomplete="off" required>
            </div>
            <div class="form-group">
                <label class="form-label">Duration</label>
                <input type="text" name="duration" id="editDuration" class="form-control" autocomplete="off" required>
            </div>
            <div class="form-group">
                <label class="form-label">Package Details</label>
                <textarea name="details" id="editDetails" class="form-control" rows="4"></textarea>
            </div>
            <div class="form-group">
                <label class="form-label">Status</label>
                <select name="status" id="editStatus" class="form-control">
                    <option value="active">Active</option>
                    <option value="inactive">Inactive</option>
                </select>
            </div>
            <div class="modal-buttons">
                <button type="submit" class="btn btn-primary">Save Changes</button>
                <button type="button" class="btn btn-glass modal-cancel">Cancel</button>
            </div>
        </form>
    </div>
</div>

<!-- Delete Confirmation Modal -->
<div class="modal" id="deletePackageModal">
    <div class="modal-content glass-card delete-modal">
        <span class="modal-close"><i class="fas fa-times"></i></span>
        <div class="modal-header">
            <h2>Delete Package</h2>
        </div>
        <div class="delete-confirmation">
            <div class="delete-icon">
                <i class="fas fa-exclamation-triangle"></i>
            </div>
            <p class="delete-message">Are you sure you want to delete <strong id="deletePackageName"></strong>?</p>
            <p class="delete-warning">This action cannot be undone.</p>
        </div>
        <div class="modal-buttons">
            <button type="button" class="btn btn-danger" id="confirmDelete">Delete</button>
            <button type="button" class="btn btn-glass modal-cancel">Cancel</button>
        </div>
    </div>
</div>

<style>
/* Action Button Colors - Green for consistency */
.action-buttons .btn-icon {
    color: #4CAF50 !important;
}

.action-buttons .btn-icon:hover {
    background: rgba(76, 175, 80, 0.1) !important;
    color: #4CAF50 !important;
    border-color: #4CAF50 !important;
}

.action-buttons .btn-icon.edit {
    color: #4CAF50 !important;
}

.action-buttons .btn-icon.delete {
    color: #4CAF50 !important;
}
</style>

<script>
(function() {
    // Package Management Modal Functionality

    // Get modal elements
    const addPackageModal = document.getElementById('addPackageModal');
    const editPackageModal = document.getElementById('editPackageModal');
    const deletePackageModal = document.getElementById('deletePackageModal');

    // Get buttons
    const addPackageBtn = document.getElementById('addPackageBtn');

    // Add Package Modal
    if (addPackageBtn) {
        addPackageBtn.addEventListener('click', function() {
            if (addPackageModal) {
                addPackageModal.style.display = 'block';
            }
        });
    }

    // Edit and Delete buttons for each row
    document.querySelectorAll('.btn-icon.edit').forEach(button => {
        button.addEventListener('click', function() {
            if (editPackageModal) {
                // Get package data from the row
                const row = this.closest('tr');
                const packageId = row.cells[0].textContent;
                const packageName = row.cells[1].textContent;
                const price = row.cells[2].textContent;
                const duration = row.cells[3].textContent;

                // Populate edit form
                const editForm = editPackageModal.querySelector('form');
                if (editForm) {
                    const nameInput = editForm.querySelector('[name="packageName"]');
                    const priceInput = editForm.querySelector('[name="price"]');
                    const durationInput = editForm.querySelector('[name="duration"]');

                    if (nameInput) nameInput.value = packageName;
                    if (priceInput) priceInput.value = price;
                    if (durationInput) durationInput.value = duration;
                }

                editPackageModal.style.display = 'block';
            }
        });
    });

    document.querySelectorAll('.btn-icon.delete').forEach(button => {
        button.addEventListener('click', function() {
            if (deletePackageModal) {
                // Get package data from the row
                const row = this.closest('tr');
                const packageName = row.cells[1].textContent;

                // Update delete modal with package name
                const packageNameElement = deletePackageModal.querySelector('#deletePackageName');
                if (packageNameElement) {
                    packageNameElement.textContent = packageName;
                }

                deletePackageModal.style.display = 'block';
            }
        });
    });

    // Close modals
    document.querySelectorAll('.modal-close, .modal-cancel').forEach(element => {
        element.addEventListener('click', function() {
            const modal = this.closest('.modal');
            if (modal) {
                modal.style.display = 'none';
            }
        });
    });

    // Close modal when clicking outside
    document.querySelectorAll('.modal').forEach(modal => {
        modal.addEventListener('click', function(e) {
            if (e.target === this) {
                this.style.display = 'none';
            }
        });
    });

    // Handle form submissions
    const addPackageForm = document.getElementById('addPackageForm');
    if (addPackageForm) {
        addPackageForm.addEventListener('submit', function(e) {
            e.preventDefault();

            // Get form data
            const formData = new FormData(this);
            const packageName = formData.get('packageName');
            const price = formData.get('price');
            const duration = formData.get('duration');

            // In a real app, this would send to server
            alert(`Package "${packageName}" added successfully!`);

            // Close modal and reset form
            addPackageModal.style.display = 'none';
            this.reset();
        });
    }

    const editPackageForm = document.getElementById('editPackageForm');
    if (editPackageForm) {
        editPackageForm.addEventListener('submit', function(e) {
            e.preventDefault();

            // Get form data
            const formData = new FormData(this);
            const packageName = formData.get('packageName');

            // In a real app, this would send to server
            alert(`Package "${packageName}" updated successfully!`);

            // Close modal
            editPackageModal.style.display = 'none';
        });
    }

    // Delete confirmation
    const confirmDeleteBtn = document.getElementById('confirmDeletePackage');
    if (confirmDeleteBtn) {
        confirmDeleteBtn.addEventListener('click', function() {
            const packageName = document.getElementById('deletePackageName')?.textContent || 'Package';

            // In a real app, this would send delete request to server
            alert(`Package "${packageName}" deleted successfully!`);

            // Close modal
            deletePackageModal.style.display = 'none';
        });
    }
})();
</script>